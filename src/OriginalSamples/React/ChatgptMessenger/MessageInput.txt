import React, { useState } from "react";
import { Grid, TextField, Button, ThemeProvider, createTheme, makeStyles } from "@material-ui/core";

interface Message {
  id: number;
  sender: string;
  text: string;
}

interface Props {
  onAddMessage: (message: string) => void;
}

const buttonTheme = createTheme({
  palette: {
    primary: {
      main: "#0099CC",
    },
    secondary: {
      main: "#005172",
    },
  },
});

const useStyles = makeStyles({
  messageInputContainer: {
    position: "fixed",
    bottom: "0px",
    left: "0",
    right: "0",
    zIndex: 999,
    padding: "5% 5%",
    backgroundImage:"linear-gradient(to bottom, transparent, white)",
  },
});

const MessageInput = (props: Props) => {
  const [message, setMessage] = useState("");
  const classes = useStyles();

  const handleMessageChange = (event: React.ChangeEvent<HTMLInputElement>) => {
    setMessage(event.target.value);
  };

  const handleAddMessage = () => {
    if (message.trim()) {
      const newMessage: Message = {
        id: Date.now(),
        sender: "User",
        text: message,
      };
      props.onAddMessage(message.trim());
      setMessage("");
    }
  };

  const handleKeyPress = (event: React.KeyboardEvent<HTMLInputElement>) => {
    if (event.key === 'Enter') {
      handleAddMessage();
    }
  }

  return (
    <ThemeProvider theme={buttonTheme}>
      <div className={classes.messageInputContainer} >
        <Grid container spacing={1}>
          <Grid item xs={9}>
            <TextField
              variant="standard"
              placeholder="Type a message"
              fullWidth
              value={message}
              onChange={handleMessageChange}
              onKeyPress={handleKeyPress}
            />
          </Grid>
          <Grid item xs={3}>
            <Button
              variant="contained"
              color="primary"
              fullWidth
              onClick={handleAddMessage}
            >
              Send
            </Button>
          </Grid>
        </Grid>
      </div>
    </ThemeProvider>
  );
};

export default MessageInput;